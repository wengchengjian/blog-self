import React, { FC } from "react";
import { Layout, List, Card, Space, Divider, Button } from "antd";
import Axios from "../../types/Axios";
import {
  MessageOutlined,
  TagOutlined,
  LikeOutlined,
  StarOutlined,
} from "@ant-design/icons";
import "antd/dist/antd.css";
import {
  REFRESH,
  url as ArticleUrl,
  ArticleActionCreator,
  article,
  ArticleAction,
} from "../../types/Article";
import Avatar from "antd/lib/avatar/avatar";
import BlogContent from "../../components/BlogContent";
import { Dispatch } from "redux";
import store from "../../redux/store";

const { Content } = Layout;

type IconProps = {
  icon: typeof MessageOutlined;
  text?: string;
};
const IconText = ({ icon, text }: IconProps) => (
  <Space>
    {React.createElement(icon)}
    {text}
  </Space>
);
interface BlogIndexType {
  articles: article[];
  refresh: (data: article[]) => ArticleAction;
}

const BlogIndex = (props: BlogIndexType) => {
  const handleClick = () => {
    console.log(props.refresh);
  };
  const handleDispath = () => {
    getArtilces(props.refresh);
  };
  const getArtilces = async (refresh: (data: article[]) => ArticleAction) => {
    console.log("更新前:", store.getState());
    const res = await Axios.post(ArticleUrl, {
      authorId: 5,
    });
    refresh(res.data.data);
    console.log("更新后:", store.getState());
  };
  return (
    <>
      <BlogContent>
        <Button onClick={handleClick}>获取artile</Button>
        <Button onClick={handleDispath}>设置artile</Button>
      </BlogContent>
    </>
  );
};
export default BlogIndex;